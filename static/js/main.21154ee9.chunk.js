(this["webpackJsonpbook-search"]=this["webpackJsonpbook-search"]||[]).push([[0],{32:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);n(2);var r=n(12),c=n.n(r),a=n(6),o=n(11),s=n(18),i=n(20),l=n(7),u="BOOKS_LIST_REQUEST",j="BOOKS_LIST_SUCCESS",d="BOOKS_LIST_FAILURE",b="SELECT_PAGE",p={items:[],loading:!1,error:null,page:0};var h="BOOK_MODAL_SHOW",O="BOOK_MODAL_CLOSE",v={item:null,active:!1};var m=n(14),x="SEARCH_FIELD_CHANGE",f={name:""};var _=n(8),g=n.n(_),k=n(10);function w(e){return{type:u,payload:{search:e}}}function y(e){return{type:b,payload:{page:e}}}var N=n(19),L=function(){var e=Object(N.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://openlibrary.org","/search.json?q=").concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.next=7,n.json();case 7:return r=e.sent,console.log(r.docs.filter((function(e){return e.publisher}))),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=g.a.mark(D),S=g.a.mark(F),E=g.a.mark(I),M=g.a.mark(A),B=g.a.mark(R);function T(e){var t=e.type,n=e.payload;return t===x&&""!==n.value.trim()}function D(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.c)(w(e.payload.value));case 2:case"end":return t.stop()}}),C)}function F(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(1e3,T,D);case 2:case"end":return e.stop()}}),S)}function I(e){var t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(k.a)(L,e.payload.search);case 3:return t=n.sent,n.next=6,Object(k.c)((c=t.docs,{type:j,payload:{items:c}}));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(k.c)((r=n.t0.message,{type:d,payload:{error:r}}));case 12:case"end":return n.stop()}var r,c}),E,null,[[0,8]])}function A(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)(u,I);case 2:case"end":return e.stop()}}),M)}function R(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(F);case 2:return e.next=4,Object(k.d)(A);case 4:case"end":return e.stop()}}),B)}var K=Object(o.b)({booksList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),{},{items:[],loading:!0,error:null,page:0});case d:var n=t.payload.error;return Object(l.a)(Object(l.a)({},e),{},{items:[],loading:!1,error:n,page:0});case j:var r=t.payload.items;return Object(l.a)(Object(l.a)({},e),{},{items:r,loading:!1,error:null,page:1});case b:var c=t.payload.page;return Object(l.a)(Object(l.a)({},e),{},{page:c});default:return e}},bookModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var n=t.payload.item;return Object(l.a)(Object(l.a)({},e),{},{item:n,active:!0});case O:return v;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var n=t.payload,r=n.name,c=n.value;return Object(l.a)(Object(l.a)({},e),{},Object(m.a)({},r,c));default:return e}}}),W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,P=Object(i.a)(),U=Object(o.d)(K,W(Object(o.a)(s.a,P)));P.run(R);var H=U;n(32);var z=n(1);var G=function(e){var t=Object(a.c)((function(e){return e.search})).name,n=Object(a.b)();return Object(z.jsx)("div",{className:"search",children:Object(z.jsxs)("form",{className:"search__form",onSubmit:function(e){e.preventDefault(),t&&n(w(t))},children:[Object(z.jsx)("div",{className:"input-block",children:Object(z.jsx)("input",{name:"name",value:t,onChange:function(e){n(function(e,t){return{type:x,payload:{name:e,value:t}}}(e.target.name,e.target.value))},type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438 \u0438\u043b\u0438 \u0438\u043c\u044f \u0430\u0432\u0442\u043e\u0440\u0430"})}),Object(z.jsxs)("button",{className:"search-form__button",children:[Object(z.jsx)("span",{children:"\u041d\u0430\u0439\u0442\u0438"}),Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"800px",height:"800px",viewBox:"0 -0.5 25 25",fill:"none",children:[Object(z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 11.1455C5.49956 8.21437 7.56975 5.69108 10.4445 5.11883C13.3193 4.54659 16.198 6.08477 17.32 8.79267C18.4421 11.5006 17.495 14.624 15.058 16.2528C12.621 17.8815 9.37287 17.562 7.3 15.4895C6.14763 14.3376 5.50014 12.775 5.5 11.1455Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(z.jsx)("path",{d:"M15.989 15.4905L19.5 19.0015",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})})};n(34);var J=function(e){var t=e.book,n=Object(a.b)();return Object(z.jsxs)("li",{className:"books__item",onClick:function(){n({type:h,payload:{item:t}})},children:[Object(z.jsx)("div",{className:"books__item-icon",children:t.cover_i?Object(z.jsx)("img",{src:"http://covers.openlibrary.org/b/id/".concat(t.cover_i,"-S.jpg"),alt:""}):""}),Object(z.jsxs)("div",{className:"books__item-content",children:[Object(z.jsx)("div",{className:"books__item-title",children:t.title}),t.author_name&&Object(z.jsx)("div",{className:"books__item-author",children:t.author_name[0]})]})]})};n(35);var X=function(e){var t=e.count,n=Object(a.c)((function(e){return e.booksList})).page,r=Object(a.b)();return Object(z.jsxs)("div",{className:"paginator",children:[Object(z.jsx)("div",{className:"paginator__list",children:function(e){for(var t=[],n=1;n<=e;n++)t.push(n);return t}(t).map((function(e){return Object(z.jsx)("button",{className:"paginator__item ".concat(n===e?"paginator__item--active":""),onClick:function(){return function(e){r(y(e))}(e)},children:e},e)}))}),Object(z.jsxs)("div",{className:"paginator__actions",children:[Object(z.jsx)("button",{className:"paginator__action paginator__action--before",onClick:function(){n>1&&r(y(n-1))},children:Object(z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"800px",height:"800px",viewBox:"0 0 1024 1024",version:"1.1",children:Object(z.jsx)("path",{d:"M768 903.232l-50.432 56.768L256 512l461.568-448 50.432 56.768L364.928 512z"})})}),Object(z.jsx)("button",{className:"paginator__action paginator__action--after",onClick:function(){n<t&&r(y(n+1))},children:Object(z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"800px",height:"800px",viewBox:"0 0 1024 1024",version:"1.1",children:Object(z.jsx)("path",{d:"M256 120.768L306.432 64 768 512l-461.568 448L256 903.232 659.072 512z"})})})]})]})};n(36);var q=function(e){return Object(z.jsx)("div",{className:"error",children:Object(z.jsx)("p",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})})};n(37);var Q=function(e){return Object(z.jsx)("div",{className:"loader",children:Object(z.jsx)("div",{className:"loader__icon"})})};n(38);var V=function(e){var t=Object(a.c)((function(e){return e.booksList})),n=t.items,r=t.loading,c=t.error,o=t.page,s=function(e){return 15*e-15};return Object(z.jsxs)("div",{className:"books",children:[r&&Object(z.jsx)(Q,{}),c&&Object(z.jsx)(q,{}),n.length>0&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("ul",{className:"books__list",children:n.slice(s(o),s(o)+15).map((function(e){return Object(z.jsx)(J,{book:e},e.key)}))}),Object(z.jsx)(X,{count:Math.ceil(n.length/15)})]})]})};n(39);var Z=function(e){var t=Object(a.c)((function(e){return e.bookModal})),n=t.item,r=t.active,c=Object(a.b)(),o=function(e){e.preventDefault();var t=e.target;!t.closest(".modal__button")&&t.closest(".modal__card")||c({type:O})};return Object(z.jsx)("div",{className:"book-modal modal ".concat(r?"modal--active":""),onClick:function(e){return o(e)},children:Object(z.jsx)("div",{className:"modal__layout",children:Object(z.jsxs)("div",{className:"modal__inner",children:[Object(z.jsx)("button",{className:"modal__close",children:Object(z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"800px",height:"800px",viewBox:"-0.5 0 25 25",fill:"none",children:[Object(z.jsx)("path",{d:"M3 21.32L21 3.32001",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(z.jsx)("path",{d:"M3 3.32001L21 21.32",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),n&&Object(z.jsx)("div",{className:"modal__body",children:Object(z.jsxs)("div",{className:"modal__wrapper",children:[Object(z.jsxs)("div",{className:"book-modal__content",children:[Object(z.jsx)("h2",{children:n.title}),n.author_name&&Object(z.jsx)("p",{children:n.author_name[0]})]}),n.cover_i?Object(z.jsx)("div",{className:"book-modal__icon",children:Object(z.jsx)("img",{src:"http://covers.openlibrary.org/b/id/".concat(n.cover_i,"-L.jpg"),alt:""})}):""]})})]})})})};var Y=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"app",children:Object(z.jsxs)("div",{className:"container",children:[Object(z.jsx)(G,{}),Object(z.jsx)(V,{})]})}),Object(z.jsx)(Z,{})]})},$=(n(40),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))});c.a.render(Object(z.jsx)(a.a,{store:H,children:Object(z.jsx)(Y,{})}),document.getElementById("root")),$()}},[[41,1,2]]]);
//# sourceMappingURL=main.21154ee9.chunk.js.map
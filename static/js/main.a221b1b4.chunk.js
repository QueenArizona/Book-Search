(this["webpackJsonpbook-search"]=this["webpackJsonpbook-search"]||[]).push([[0],{32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);a(2);var n=a(12),c=a.n(n),r=a(6),o=a(11),s=a(18),i=a(20),l=a(7),u="BOOK_LIST_REQUEST",b="BOOK_LIST_SUCCESS",j="BOOK_LIST_FAILURE",d="SELECT_PAGE",p={items:[],loading:!1,error:null,page:0};var m="BOOK_MODAL_SHOW",O="BOOK_MODAL_CLOSE",h={item:null,active:!1};var v=a(14),_="SEARCH_FIELD_CHANGE",f={name:""};var x=a(8),g=a.n(x),k=a(10);function N(e){return{type:u,payload:{search:e}}}function y(e){return{type:d,payload:{page:e}}}var w=a(19),E=function(){var e=Object(w.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://openlibrary.org","/search.json?q=").concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.statusText);case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=g.a.mark(F),C=g.a.mark(D),L=g.a.mark(A),T=g.a.mark(M),I=g.a.mark(K);function B(e){var t=e.type,a=e.payload;return t===_&&""!==a.value.trim()}function F(e){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.c)(N(e.payload.value));case 2:case"end":return t.stop()}}),S)}function D(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.b)(1e3,B,F);case 2:case"end":return e.stop()}}),C)}function A(e){var t;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(k.a)(E,e.payload.search);case 3:return t=a.sent,a.next=6,Object(k.c)((c=t.docs,{type:b,payload:{items:c}}));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,Object(k.c)((n=a.t0.message,{type:j,payload:{error:n}}));case 12:case"end":return a.stop()}var n,c}),L,null,[[0,8]])}function M(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.e)(u,A);case 2:case"end":return e.stop()}}),T)}function K(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(D);case 2:return e.next=4,Object(k.d)(M);case 4:case"end":return e.stop()}}),I)}var P=Object(o.b)({bookList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),{},{items:[],loading:!0,error:null,page:0});case j:var a=t.payload.error;return Object(l.a)(Object(l.a)({},e),{},{items:[],loading:!1,error:a,page:0});case b:var n=t.payload.items;return Object(l.a)(Object(l.a)({},e),{},{items:n,loading:!1,error:null,page:1});case d:var c=t.payload.page;return Object(l.a)(Object(l.a)({},e),{},{page:c});default:return e}},bookModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var a=t.payload.item;return Object(l.a)(Object(l.a)({},e),{},{item:a,active:!0});case O:return h;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:var a=t.payload,n=a.name,c=a.value;return Object(l.a)(Object(l.a)({},e),{},Object(v.a)({},n,c));default:return e}}}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,U=Object(i.a)(),H=Object(o.d)(P,R(Object(o.a)(s.a,U)));U.run(K);var G=H;a(32);var J=a(1);var X=function(e){var t=Object(r.c)((function(e){return e.search})).name,a=Object(r.b)();return Object(J.jsxs)("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),t&&a(N(t))},children:[Object(J.jsx)("div",{className:"search-form__fieldset",children:Object(J.jsx)("input",{className:"search-form__field",name:"name",value:t,onChange:function(e){a(function(e,t){return{type:_,payload:{name:e,value:t}}}(e.target.name,e.target.value))},type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438 \u0438\u043b\u0438 \u0438\u043c\u044f \u0430\u0432\u0442\u043e\u0440\u0430"})}),Object(J.jsx)("button",{className:"search-form__button",children:"\u041d\u0430\u0439\u0442\u0438"})]})};var q=a.p+"static/media/book-icon.cd974df6.svg";a(34);var Q=function(e){var t=e.book,a=Object(r.b)();return Object(J.jsxs)("li",{className:"book-item book-list__book",onClick:function(){a({type:m,payload:{item:t}})},children:[Object(J.jsx)("div",{className:"book-item__icon",children:Object(J.jsx)("img",{className:"book-item__image",src:t.cover_i?"http://covers.openlibrary.org/b/id/".concat(t.cover_i,"-S.jpg"):q,alt:""})}),Object(J.jsxs)("span",{className:"book-item__title",children:['"',t.title.length<=24?t.title:t.title.replace(t.title.slice(17,t.title.length-4),"..."),'"']}),t.author_name&&Object(J.jsx)("span",{className:"book-item__author",children:t.author_name[0].length<=24?t.author_name[0]:t.author_name[0].replace(t.author_name[0].slice(17,t.author_name[0].length-4),"...")})]})};a(35);var V=function(e){var t=e.count,a=Object(r.c)((function(e){return e.bookList})).page,n=Object(r.b)();return Object(J.jsxs)("div",{className:"paginator",children:[Object(J.jsx)("div",{className:"pages",children:function(e){for(var t=[],a=1;a<=e;a++)t.push(a);return t}(t).map((function(e){return Object(J.jsx)("div",{className:"page ".concat(a===e?"page--active":""),onClick:function(){return function(e){n(y(e))}(e)},children:e},e)}))}),Object(J.jsxs)("div",{className:"paginator__actions",children:[Object(J.jsx)("div",{className:"paginator__action paginator__action--before",onClick:function(){a>1&&n(y(a-1))},children:"\u27ea"}),Object(J.jsx)("div",{className:"paginator__action paginator__action--after",onClick:function(){a<t&&n(y(a+1))},children:"\u27eb"})]})]})};a(36);var W=function(e){return Object(J.jsx)("div",{className:"error",children:Object(J.jsx)("p",{className:"error-message",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})})};a(37);var z=function(e){return Object(J.jsx)("div",{className:"loader",children:Object(J.jsx)("div",{className:"loader__icon"})})};a(38);var Y=function(e){var t=Object(r.c)((function(e){return e.bookList})),a=t.items,n=t.loading,c=t.error,o=t.page,s=function(e){return 15*e-15};return Object(J.jsxs)(J.Fragment,{children:[n&&Object(J.jsx)(z,{}),"\xa0",c&&Object(J.jsx)(W,{}),a.length>0&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("ul",{className:"book-list",children:a.slice(s(o),s(o)+15).map((function(e){return Object(J.jsx)(Q,{book:e},e.key)}))}),Object(J.jsx)(V,{count:Math.ceil(a.length/15)})]})]})};a(39);var Z=function(e){var t=Object(r.c)((function(e){return e.bookModal})),a=t.item,n=t.active,c=Object(r.b)();return Object(J.jsx)("div",{className:"book modal ".concat(n?"modal--active":""),children:Object(J.jsxs)("div",{className:"modal__card",children:[Object(J.jsx)("div",{className:"modal__actions",children:Object(J.jsx)("button",{className:"modal__button",onClick:function(){c({type:O})},children:"\xd7"})}),a&&Object(J.jsxs)("div",{className:"modal__content",children:[Object(J.jsx)("div",{className:"book__cover",children:Object(J.jsx)("img",{src:a.cover_i?"http://covers.openlibrary.org/b/id/".concat(a.cover_i,"-L.jpg"):q,alt:"",className:"book__image"})}),Object(J.jsxs)("div",{className:"book__details",children:[Object(J.jsxs)("div",{className:"book__wrapper",children:[Object(J.jsx)("p",{className:"book__title",children:a.title}),a.author_name&&Object(J.jsx)("p",{className:"book__author",children:a.author_name[0]})]}),Object(J.jsxs)("div",{className:"book__wrapper",children:[a.publisher&&Object(J.jsx)("p",{className:"book__publisher",children:a.publisher[0]}),a.publish_date&&Object(J.jsx)("p",{className:"book__date",children:a.publish_date[0]})]}),Object(J.jsx)("div",{className:"book__wrapper",children:a.isbn&&Object(J.jsxs)("p",{className:"book__id",children:["ISBN ",a.isbn[0]]})})]})]})]})})};var $=function(){return Object(J.jsxs)("div",{className:"container",children:[Object(J.jsx)(X,{}),Object(J.jsx)(Y,{}),Object(J.jsx)(Z,{})]})},ee=(a(40),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))});c.a.render(Object(J.jsx)(r.a,{store:G,children:Object(J.jsx)($,{})}),document.getElementById("root")),ee()}},[[41,1,2]]]);
//# sourceMappingURL=main.a221b1b4.chunk.js.map